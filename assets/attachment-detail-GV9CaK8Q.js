import{G,r as l,j as e,H as J,J as O,c as L,T as I,O as $,K as U,L as w,F as K,B as h,b as C,d as z,e as P,f as T,M as Y,w as M,x as q,u as Q}from"./index-bf1_vySP.js";import{o as A,g as S,l as R,m as v,S as W,T as X,A as Z}from"./index-pMAqu_9m.js";import{C as g,S as B,a as ee,b as ae,c as te,d as se,e as le}from"./select-gV9cyg7e.js";const _=G,ne=J,H=l.forwardRef(({className:r,...o},x)=>e.jsx($,{ref:x,className:L("fixed grid place-items-center max-h-screen inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o}));H.displayName=$.displayName;const k=l.forwardRef(({className:r,children:o,...x},n)=>e.jsx(ne,{children:e.jsx(H,{children:e.jsx(O,{ref:n,className:L("z-50 grid w-full max-w-lg lg:max-w-screen-lg border bg-card shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-md",r),...x,children:o})})}));k.displayName=O.displayName;const D=l.forwardRef(({className:r,...o},x)=>e.jsx(I,{ref:x,className:L("text-lg font-semibold leading-none tracking-tight",r),...o}));D.displayName=I.displayName;const re=l.forwardRef(({className:r,...o},x)=>e.jsx(U,{ref:x,className:L("text-sm text-muted-foreground",r),...o}));re.displayName=U.displayName;function ie({name:r}){var y,p;const{getReportAttachment:o,getPdfAttachment:x}=S,{isloading:n}=R,[j,c]=l.useState(null),[f,t]=l.useState("all"),[s,N]=l.useState(null),[m,i]=l.useState(null);l.useEffect(()=>{u()},[]);const u=async()=>{const d=await o(r);c(d)};if(l.useEffect(()=>((async()=>{if(s){i(null);const b=await S.getPdfAttachment(s.path);i(b)}})(),()=>{m&&URL.revokeObjectURL(m)}),[s]),n)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-600 dark:text-gray-300",children:[e.jsx(w,{className:"h-8 w-8 animate-spin mb-2"}),"Loading attachments..."]});if(!j)return e.jsx("div",{className:"p-5 text-center text-red-500",children:"No attachment data available."});const a=f==="all"?j.attachments:(y=j.attachments)==null?void 0:y.filter(d=>d.year===f);return e.jsxs("div",{className:"p-5 max-w-6xl mx-auto space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-4 w-4 text-blue-600"}),e.jsx("h1",{className:"text-xl font-bold flex items-center gap-2",children:j.description||r})]})}),e.jsxs("div",{className:"flex gap-3 border-b border-gray-200 dark:border-gray-700 pb-3 overflow-x-auto",children:[e.jsxs(h,{onClick:()=>t("all"),variant:f==="all"?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"All"]}),(p=j.attachments)==null?void 0:p.map(d=>e.jsxs(h,{onClick:()=>t(d.year),variant:f===d.year?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),d.year]},d.year))]}),a==null?void 0:a.map(d=>{var b;return e.jsxs(C,{children:[e.jsx(z,{children:e.jsxs(P,{className:"flex items-center gap-2 text-xl",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),"Year: ",d.year]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:(b=d.files)==null?void 0:b.map((E,V)=>e.jsx(v.details,{initial:!1,className:"group border border-gray-200 dark:border-gray-700 rounded-md",children:e.jsxs("summary",{className:"cursor-pointer flex justify-between items-center px-4 py-2 bg-gray-50 dark:bg-gray-800",children:[e.jsx("span",{className:"font-medium flex items-center gap-2",children:E.file_name}),e.jsx(h,{size:"sm",variant:"outline",className:"flex items-center gap-1",onClick:F=>{F.preventDefault(),N({name:E.file_name,path:E.file_path})},children:e.jsx(Y,{className:"h-4 w-4"})})]})},V))})})]},d.year)}),e.jsx(_,{open:!!s,onOpenChange:()=>N(null),children:e.jsxs(k,{className:"w-[90vw] h-[90vh] flex flex-col p-0 relative",children:[e.jsxs("div",{className:"absolute top-2 left-4 right-4 flex items-center justify-between",children:[e.jsx(D,{className:"text-sm font-medium truncate",children:s==null?void 0:s.name}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>N(null),className:"h-7 w-7 rounded-full p-0 bg-red-500 text-white",children:"✕"})]}),m?e.jsx("iframe",{src:m,className:"flex-1 w-full border-0 mt-10",title:s==null?void 0:s.name}):e.jsxs("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:[e.jsx(w,{className:"h-6 w-6 animate-spin mr-2"})," Loading PDF..."]})]})})]})}const ce=A(ie);function de({name:r}){var i,u;const{getReportAttachment:o}=S,{isloading:x}=R,[n,j]=l.useState(null),[c,f]=l.useState("all"),[t,s]=l.useState(null);l.useEffect(()=>{N()},[]);const N=async()=>{const a=await o(r);j(a)};if(x)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-600 dark:text-gray-300",children:[e.jsx(w,{className:"h-8 w-8 animate-spin mb-2"}),"Loading attachments..."]});if(!n)return e.jsx("div",{className:"p-5 text-center text-red-500",children:"No attachment data available."});const m=c==="all"?n.attachments:(i=n.attachments)==null?void 0:i.filter(a=>a.year===c);return e.jsxs("div",{className:"p-5 max-w-6xl mx-auto space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-5 w-5 text-blue-600"}),e.jsx("h1",{className:"text-xl font-bold flex items-center gap-2",children:n.description||r})]})}),e.jsxs("div",{className:"flex gap-3 border-b border-gray-200 dark:border-gray-700 pb-3 overflow-x-auto",children:[e.jsxs(h,{onClick:()=>f("all"),variant:c==="all"?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"All"]}),(u=n.attachments)==null?void 0:u.map(a=>e.jsxs(h,{onClick:()=>f(a.year),variant:c===a.year?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),a.year]},a.year))]}),m==null?void 0:m.map(a=>{var y;return e.jsxs(C,{children:[e.jsx(z,{children:e.jsxs(P,{className:"flex items-center gap-2 text-xl",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),"Year: ",a.year]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:(y=a.files)==null?void 0:y.map((p,d)=>e.jsx(v.details,{initial:!1,className:"group border border-gray-200 dark:border-gray-700 rounded-md",children:e.jsxs("summary",{className:"cursor-pointer flex justify-between items-center px-4 py-2 bg-gray-50 dark:bg-gray-800",children:[e.jsx("span",{className:"font-medium flex items-center gap-2",children:p.file_name}),e.jsx(h,{size:"sm",variant:"outline",className:"flex items-center gap-1",onClick:b=>{b.preventDefault(),s({name:p.file_name,path:p.file_path})},children:e.jsx(Y,{className:"h-4 w-4"})})]})},d))})})]},a.year)}),e.jsx(_,{open:!!t,onOpenChange:()=>s(null),children:e.jsxs(k,{className:"w-[90vw] h-[90vh] flex flex-col p-0 relative",children:[e.jsxs("div",{className:"absolute top-2 left-4 right-4 flex items-center justify-between",children:[e.jsx(D,{className:"text-sm font-medium truncate",children:t==null?void 0:t.name}),e.jsx(h,{variant:"ghost",size:"sm",color:"red",onClick:()=>s(null),className:"h-7 w-7 rounded-full p-0 bg-red-500 text-white",children:"✕"})]}),t&&e.jsx("iframe",{src:t.path,className:"flex-1 w-full border-0 mt-10",title:t.name})]})})]})}const oe=A(de);function me({name:r}){var i,u;const{getReportAttachment:o}=S,{isloading:x}=R,[n,j]=l.useState(null),[c,f]=l.useState("all"),[t,s]=l.useState(null);l.useEffect(()=>{N()},[]);const N=async()=>{const a=await o(r);j(a)};if(x)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-600 dark:text-gray-300",children:[e.jsx(w,{className:"h-8 w-8 animate-spin mb-2"}),"Loading attachments..."]});if(!n)return e.jsx("div",{className:"p-5 text-center text-red-500",children:"No attachment data available."});const m=c==="all"?n.attachments:(i=n.attachments)==null?void 0:i.filter(a=>a.year===c);return e.jsxs("div",{className:"p-5 max-w-6xl mx-auto space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-blue-600"}),e.jsx("h1",{className:"text-xl font-bold flex items-center gap-2",children:n.description||r})]})}),e.jsxs("div",{className:"flex gap-3 border-b border-gray-200 dark:border-gray-700 pb-3 overflow-x-auto",children:[e.jsxs(h,{onClick:()=>f("all"),variant:c==="all"?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"All"]}),(u=n.attachments)==null?void 0:u.map(a=>e.jsxs(h,{onClick:()=>f(a.year),variant:c===a.year?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),a.year]},a.year))]}),m==null?void 0:m.map(a=>{var y;return e.jsxs(C,{children:[e.jsx(z,{children:e.jsxs(P,{className:"flex items-center gap-2 text-xl",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),"Year: ",a.year]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:(y=a.files)==null?void 0:y.map((p,d)=>e.jsx(v.details,{initial:!1,className:"group border border-gray-200 dark:border-gray-700 rounded-md",children:e.jsxs("summary",{className:"cursor-pointer flex justify-between items-center px-4 py-2 bg-gray-50 dark:bg-gray-800",children:[e.jsx("span",{className:"font-medium flex items-center gap-2",children:p.file_name}),e.jsx(h,{size:"sm",variant:"outline",className:"flex items-center gap-1",onClick:b=>{b.preventDefault(),s({name:p.file_name,path:p.file_path})},children:e.jsx(Y,{className:"h-4 w-4"})})]})},d))})})]},a.year)}),e.jsx(_,{open:!!t,onOpenChange:()=>s(null),children:e.jsxs(k,{className:"w-[90vw] h-[90vh] flex flex-col p-0 relative",children:[e.jsxs("div",{className:"absolute top-2 left-4 right-4 flex items-center justify-between",children:[e.jsx(D,{className:"text-sm font-medium truncate",children:t==null?void 0:t.name}),e.jsx(h,{variant:"ghost",size:"sm",color:"red",onClick:()=>s(null),className:"h-7 w-7 rounded-full p-0 bg-red-500 text-white",children:"✕"})]}),t&&e.jsx("iframe",{src:t.path,className:"flex-1 w-full border-0 mt-10",title:t.name})]})})]})}const xe=A(me);function he({name:r}){var i,u;const{getReportAttachment:o}=S,{isloading:x}=R,[n,j]=l.useState(null),[c,f]=l.useState("all"),[t,s]=l.useState(null);l.useEffect(()=>{N()},[]);const N=async()=>{const a=await o(r);j(a)};if(x)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-600 dark:text-gray-300",children:[e.jsx(w,{className:"h-8 w-8 animate-spin mb-2"}),"Loading attachments..."]});if(!n)return e.jsx("div",{className:"p-5 text-center text-red-500",children:"No attachment data available."});const m=c==="all"?n.attachments:(i=n.attachments)==null?void 0:i.filter(a=>a.year===c);return e.jsxs("div",{className:"p-5 max-w-6xl mx-auto space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-600"}),e.jsx("h1",{className:"text-xl font-bold flex items-center gap-2",children:n.description||r})]})}),e.jsxs("div",{className:"flex gap-3 border-b border-gray-200 dark:border-gray-700 pb-3 overflow-x-auto",children:[e.jsxs(h,{onClick:()=>f("all"),variant:c==="all"?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"All"]}),(u=n.attachments)==null?void 0:u.map(a=>e.jsxs(h,{onClick:()=>f(a.year),variant:c===a.year?"default":"outline",className:"rounded-full",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),a.year]},a.year))]}),m==null?void 0:m.map(a=>{var y;return e.jsxs(C,{children:[e.jsx(z,{children:e.jsxs(P,{className:"flex items-center gap-2 text-xl",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),"Year: ",a.year]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:(y=a.files)==null?void 0:y.map((p,d)=>e.jsx(v.details,{initial:!1,className:"group border border-gray-200 dark:border-gray-700 rounded-md",children:e.jsxs("summary",{className:"cursor-pointer flex justify-between items-center px-4 py-2 bg-gray-50 dark:bg-gray-800",children:[e.jsx("span",{className:"font-medium flex items-center gap-2",children:p.file_name}),e.jsx(h,{size:"sm",variant:"outline",className:"flex items-center gap-1",onClick:b=>{b.preventDefault(),s({name:p.file_name,path:p.file_path})},children:e.jsx(Y,{className:"h-4 w-4"})})]})},d))})})]},a.year)}),e.jsx(_,{open:!!t,onOpenChange:()=>s(null),children:e.jsxs(k,{className:"w-[90vw] h-[90vh] flex flex-col p-0 relative",children:[e.jsxs("div",{className:"absolute top-2 left-4 right-4 flex items-center justify-between",children:[e.jsx(D,{className:"text-sm font-medium truncate",children:t==null?void 0:t.name}),e.jsx(h,{variant:"ghost",size:"sm",color:"red",onClick:()=>s(null),className:"h-7 w-7 rounded-full p-0 bg-red-500 text-white",children:"✕"})]}),t&&e.jsx("iframe",{src:t.path,className:"flex-1 w-full border-0 mt-10",title:t.name})]})})]})}const fe=A(he);function ue(){const{name:r}=M(),o=q(),{getReportType:x}=S,{isloading:n}=R,j=Q(),[c,f]=l.useState([]),[t,s]=l.useState(null);l.useEffect(()=>{N()},[]);const N=async()=>{var u;const i=await x();f((i==null?void 0:i.report)||[]),(u=o.state)!=null&&u.name?s(o.state.name):r&&s(r)},m=i=>{s(i),j(`/attachment/${i}`,{replace:!0,state:{name:i}})};return n&&c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-600 dark:text-gray-300",children:[e.jsx(w,{className:"h-8 w-8 animate-spin mb-2"}),"Loading reports..."]}):e.jsxs("div",{className:"p-3 mx-auto space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"w-64",children:e.jsx(C,{className:"shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs(B,{value:t||"",onValueChange:m,children:[e.jsx(ee,{className:"w-full h-9 text-sm",children:e.jsx(ae,{placeholder:"Choose a report"})}),e.jsx(te,{children:c.map(({name:i,description:u})=>e.jsx(se,{value:i,className:"text-sm",children:u},i))})]})})})}),!t&&e.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-600 dark:text-gray-300",children:"Please choose a report to view attachments."}),e.jsxs(C,{children:[t==="lipidprofile"&&e.jsx(ce,{name:"lipidprofile"}),t==="lft"&&e.jsx(oe,{name:"lft"}),t==="rft"&&e.jsx(xe,{name:"rft"}),t==="thyroid"&&e.jsx(fe,{name:"thyroid"}),!["lipidprofile","lft","rft","thyroid"].includes(t||"")&&t&&e.jsxs("div",{className:"italic p-5 font-bold flex items-center gap-2 text-yellow-600 dark:text-yellow-400",children:[e.jsx(le,{className:"h-6 w-6"}),e.jsxs("span",{children:['No custom component for "',t,'" yet.']})]})]})]})}const Ne=A(ue);export{Ne as default};
